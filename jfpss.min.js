!function(e){if("undefined"==typeof jframes)throw new Error("jframes is not defined.");var o,r,i,f,s,t,d,n=n||{},a=function(e){for(var n in t=t||{lifespan:3e3,recordspan:1e3,maxRecords:10,precision:0},e=e||{})t[n]=e[n]},c=function(){if(s){var e=s.slice();return e.sort(function(e,n){return e.fps-n.fps}),(e=e[parseInt(e.length/2)])?e.fps:void 0}},u=function(){o&&(jframes.release(o),t.onshutdown&&t.onshutdown({records:s.slice(),median:c}),s=t=o=null)};n.config=a,n.startup=function(e){if(!o){a(e);var n=new Date;i=r=n,d=f=0,s=[],o=jframes.request(function(e){if(o){var n=new Date;if(f++,n-i>=t.recordspan){for(s.unshift({index:d++,fps:(f*(1e3/(n-i))).toFixed(t.precision)}),i=n;s.length>t.maxRecords;)s.pop();t.onrecord&&t.onrecord({records:s.slice(),median:c}),f=0}t.lifespan<0||n-r<=t.lifespan?e.next():u()}})}},n.shutdown=u,"function"==typeof define?(define.amd||define.cmd)&&define(function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:window.jfpss=n}();