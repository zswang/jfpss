<!doctype html>
<html>
<head>
  <script src="../components/jhtmls/jhtmls.js"></script>
  <script src="../components/jframes/jframes.js"></script>
  <script src="jfpss.js"></script>
  <style>
  </style>
</head>
<body>
  <style>
/*<css>*/
#jfpss-bar {
  position: fixed;
  left: 10px;
  top: 10px;
  z-index: 100000;
  font-family: Consolas;
}
#jfpss-bar em {
  color: green;
}
#jfpss-bar ul {
  background: green;
  padding: 0;
  margin: 0;
}
#jfpss-bar li {
  list-style-type: none;
  width: 100px;
  font-size: 12px;
  height: 16px;
  line-height: 16px;
  padding: 0 5px;
  color: rgb(180, 180, 0);
  text-align: right;
  background-image: linear-gradient(to bottom, rgba(50, 50, 80, 0.4), rgba(0, 0, 0, 0.7));
  background-repeat: no-repeat;
  background-position: 0 0;
}
#jfpss-bar li:first-child {
  height: 24px;
  line-height: 26px;
  font-size: 18px;
  color: yellow;
}
/*</css>*/
  </style>
  <!--html-->
  <div id="jfpss-bar"></div>
  <!--/html-->
  <script
    data-lifespan="-1"
    data-max-records="5"
    data-precision="2"
    data-recordspan="500">
void function() {
  /*<js>*/
  var bar = document.getElementById('jfpss-bar');
  var render = jhtmls.render(/*#*/ function() {/*!
<ul>
forEach(function(item) {
  <li style="background-position: #{70 - parseInt(70 * (Math.min(60, item.fps) / 60))}px 0;"><em>#{item.index}</em> #{item.fps < 10 ? '0' : ''}#{item.fps}</li>
});
</ul>
  */});

  var scripts = document.getElementsByTagName('script');
  var currScript = scripts[scripts.length - 1];

  var maxRecords = currScript.getAttribute('data-max-records') || 5;
  var precision = currScript.getAttribute('data-precision') || 1;
  var recordspan = currScript.getAttribute('data-recordspan') || 500;
  var lifespan = currScript.getAttribute('data-lifespan') || -1;

  jfpss.startup({
    lifespan: -1,
    recordspan: recordspan,
    maxRecords: maxRecords,
    precision: precision,
    onrecord: function(e) {
      bar.innerHTML = render(e.records);
    }
  });
  /*</js>*/
}();
  </script>
</body>
</html>
